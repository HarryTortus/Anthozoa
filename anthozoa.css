:root {
    --page-bg: #ede3df; 
    --text-on-page-bg: #3b4c1a;
    --control-panel-bg: rgba(76, 97, 33, 0.9); 
    --text-on-control-panel: #f0f2f5; 
    --slider-track-active: var(--text-on-page-bg); 
    --slider-track-inactive: var(--page-bg);     
    --slider-thumb-color: var(--text-on-page-bg);
    --control-hover-color: #678130; 
    --button-active-bg: #a2b575; /* Used for button:active state */
    --canvas-bg-color: #1a1a1a; 
}

body { margin: 0; overflow-x: hidden; background-color: var(--page-bg); display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding-top: 15px; padding-bottom: 5px; box-sizing: border-box; font-family: 'Oswald', sans-serif; color: var(--text-on-page-bg); }
.main-title { font-weight: 700; font-size: 2.8em; color: var(--text-on-page-bg); margin-top: 0; margin-bottom: 20px; text-align: center; letter-spacing: 1.5px; text-shadow: 1px 1px 2px rgba(0,0,0,0.05); flex-shrink: 0; }
#sketch-container { width: 100%; display: flex; flex-direction: column; align-items: center; flex-grow: 1; padding-left: 15px; padding-right: 15px; box-sizing: border-box; overflow: hidden; }
#p5-canvas-placeholder { width: 100%; display: flex; justify-content: center; align-items: center; margin-bottom: 15px; }
canvas { display: block; border-radius: 8px; box-shadow: 0 5px 10px rgba(0,0,0,0.12); }
        
.controls {
    display: flex;
    flex-direction: row; /* Main direction for groups */
    flex-wrap: wrap;     /* Allow groups to wrap */
    justify-content: flex-start; /* Align groups to the start */
    align-items: flex-start; /* Align wrapped groups to the start of their new line */
    gap: 10px 20px; /* Gap between control groups (row-gap column-gap) */
    background: var(--control-panel-bg); 
    border-radius: 10px; 
    padding: 10px 15px; 
    color: var(--text-on-control-panel);
    font-family: 'Oswald', sans-serif; 
    font-size: 14px; 
    box-shadow: 0 3px 8px rgba(0,0,0,0.2); 
    width: 100%; 
    box-sizing: border-box;
    flex-shrink: 0; 
    margin-bottom: 8px; 
}
        
.controls .control-group {
    display: flex;
    flex-direction: column; /* Stack labels within a slider group */
    gap: 10px; /* Gap between label-input items within a group */
    padding: 5px;
    /* border: 1px dashed #fff3; /* For visualizing groups during layout */
    /* min-width: 180px; /* Give groups some minimum width if they contain multiple items */
}

/* Group for sliders - allow individual label-input pairs to wrap */
.controls .control-group#appearance-controls,
.controls .control-group#behavior-controls {
    flex-direction: row; /* Sliders within these groups will be in a row */
    flex-wrap: wrap;     /* And wrap if necessary */
    align-items: center; /* Center items in the row */
    gap: 8px 15px;    /* Gap between each label-input unit */
}
.controls .control-group#appearance-controls label,
.controls .control-group#behavior-controls label {
    flex-direction: column; /* Stack text above input for sliders */
    align-items: flex-start;
    gap: 4px;
    min-width: 130px; /* Ensure enough width for label text + slider */
}

.controls .control-group#action-controls {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center; /* Center action buttons */
    gap: 10px;
    width: 100%; /* Allow action group to take more space if it's the last one wrapping */
    margin-top: 5px;
}

.controls label { 
    font-weight: normal; 
    display: flex; 
    /* align-items: center; Align to start for column layout */
    white-space: nowrap; 
    /* gap: 6px; Defined in group-specific labels now */
    color: var(--text-on-control-panel); 
    cursor: pointer; 
}

.controls input[type="checkbox"] { /* No changes needed */ }
.controls input[type="range"] { /* No changes needed */ }
/* ... All other specific input styles remain the same ... */
.controls input[type="color"] { 
    border: 1px solid var(--text-on-control-panel); 
    background: var(--canvas-bg-color); 
    width: 100%; /* Make color picker fill available space in its label */
    max-width: 100px; /* But not too wide */
    height: 28px; 
    border-radius: 4px; 
    cursor: pointer; 
    padding: 0; 
    margin-top: 2px; /* Align with slider if text is above */
}


/* ACTION BUTTONS (Play/Pause, Reset, Fullscreen) */
.controls .control-group#action-controls button {
    background: transparent; 
    color: var(--text-on-control-panel);
    border: 1px solid var(--text-on-control-panel); 
    border-radius: 5px;
    padding: 6px 12px; 
    box-shadow: none; 
    transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
    font-family: 'Oswald', sans-serif; 
    font-weight: normal; 
    font-size: 0.9em;   
    line-height: 1.2;   
    min-width: auto;  /* Let text define width */  
    text-align: center;
    cursor: pointer;
}
.controls .control-group#action-controls button:hover { background: var(--text-on-control-panel); color: var(--control-panel-bg); border-color: var(--text-on-control-panel); }
.controls .control-group#action-controls button:active { background: var(--button-active-bg); color: var(--control-panel-bg); border-color: var(--button-active-bg); }
button#playPauseButton { min-width: 70px; } /* For "Pause" text */
button#fullscreenButton { font-weight: bold; } 

.value-display { /* ... (No changes needed) ... */ }
        
/* Remove .shape-selector and .shape-button as they are not in current Anthozoa HTML */

#site-footer { /* ... (No changes needed) ... */ }
body.fullscreen-active { /* ... (No changes needed) ... */ }

/* MEDIA QUERIES for responsive control layout */
@media (max-width: 900px) { /* Example breakpoint: groups might start stacking */
    .controls {
        /* justify-content: center; */ /* Center groups if they stack */
    }
    .controls .control-group#appearance-controls,
    .controls .control-group#behavior-controls {
        justify-content: center; /* Center sliders if group is wide */
    }
}

@media (max-width: 600px) { 
    .main-title { font-size: 2em; margin-bottom: 15px; }
    .controls { padding: 8px; flex-direction: column; align-items: center; } /* Stack all groups */
    
    .controls .control-group { 
        width: 100%; 
        max-width: 350px; /* Max width for stacked groups */
        padding: 8px 0; 
        align-items: center; /* Center content of group */
    }
    /* Slider labels stack text above input by default due to label's flex-direction: column */
    .controls .control-group#appearance-controls label,
    .controls .control-group#behavior-controls label {
        min-width: 150px; /* Adjust for stacked view */
        align-items: center; /* Center text and input within label */
    }
     .controls .control-group#appearance-controls input[type="color"] {
        margin-left: 0; /* Reset margin if text is above */
    }

    .controls .control-group#action-controls {
        flex-direction: row; /* Keep action buttons in a row */
        justify-content: center;
        width: 100%;
        max-width: none; 
    }
    .controls input[type="range"] { width: 150px; } /* Slightly wider in stacked view */
    #site-footer { font-size: 0.75em; }
}
@media (max-width: 420px) {
    .main-title { font-size: 1.7em; margin-bottom: 12px; }
    #sketch-container { padding-left: 10px; padding-right: 10px; }
    .controls input[type="range"] { width: 130px; }
    .controls .control-group#action-controls button { font-size: 0.85em; padding: 5px 8px;}
    button#playPauseButton { min-width: 60px; }
}
