:root {
    --page-bg: #ede3df; 
    --text-on-page-bg: #3b4c1a;
    --control-panel-bg: rgba(76, 97, 33, 0.9); /* Matched Line Flow panel */
    --text-on-control-panel: #f0f2f5; 
    --slider-track-active: var(--text-on-page-bg); /* Line Flow Green for slider active */
    --slider-track-inactive: var(--page-bg);     /* Line Flow Beige for slider inactive */
    --slider-thumb-color: var(--text-on-page-bg); /* Line Flow Green for thumb */
    --control-hover-color: #678130; 
    --shape-button-active-bg: #a2b575; 
    --shape-button-hover-bg: var(--page-bg); 
    --canvas-bg-color: #1a1a1a; 
}

body { 
    margin: 0; 
    overflow-x: hidden; 
    background-color: var(--page-bg); 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    min-height: 100vh; 
    padding-top: 15px; 
    padding-bottom: 5px; 
    box-sizing: border-box; 
    font-family: 'Oswald', sans-serif; 
    color: var(--text-on-page-bg); 
}
.main-title { 
    font-weight: 700; 
    font-size: 2.8em; /* Adjusted back from 2.6em */
    color: var(--text-on-page-bg); 
    margin-top: 0; 
    margin-bottom: 20px; 
    text-align: center; 
    letter-spacing: 1.5px; 
    text-shadow: 1px 1px 2px rgba(0,0,0,0.05); 
    flex-shrink: 0; 
}
#sketch-container { 
    width: 100%; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    flex-grow: 1; 
    padding-left: 15px; 
    padding-right: 15px; 
    box-sizing: border-box; 
    overflow: hidden; 
}
#p5-canvas-placeholder { 
    width: 100%; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    margin-bottom: 15px; 
}
canvas { 
    display: block; 
    border-radius: 8px; 
    box-shadow: 0 5px 10px rgba(0,0,0,0.12); 
}
        
.controls {
    display: flex;
    flex-direction: row; 
    flex-wrap: wrap; 
    justify-content: space-around; 
    align-items: flex-start; /* Align groups to the start of cross axis */
    gap: 10px 15px; 
    background: var(--control-panel-bg); 
    border-radius: 10px; 
    padding: 10px 15px; 
    color: var(--text-on-control-panel);
    font-family: 'Oswald', sans-serif; 
    font-size: 14px; 
    box-shadow: 0 3px 8px rgba(0,0,0,0.2); 
    width: 100%; 
    box-sizing: border-box;
    flex-shrink: 0; 
    margin-bottom: 8px; 
}
        
/* Removed .button-groups-wrapper as controls are simpler now */

.controls .control-group {
    display: flex;
    flex-direction: column; /* Stack items within a group vertically */
    flex-wrap: nowrap; /* Prevent wrapping within a single label-input pair */
    gap: 8px; /* Gap between label-input pairs if multiple in a conceptual group */
    align-items: flex-start; /* Align items to the start */
    padding: 5px 8px; 
    min-width: 180px; /* Give groups some minimum width */
}
.controls .control-group.action-group { /* For buttons and toggles */
    flex-direction: row; /* Override to keep buttons/toggles in a row */
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 10px 15px;
}


.controls label { 
    font-weight: normal; 
    display: flex; 
    align-items: center; 
    white-space: nowrap; 
    gap: 6px; 
    color: var(--text-on-control-panel); 
    cursor: pointer; 
    width: 100%; /* Make label take full width for vertical stacking */
    justify-content: space-between; /* Push input to the right */
}
.controls .action-group label { /* Labels in action group can be more compact */
    width: auto;
    justify-content: flex-start;
}

.controls input[type="checkbox"] { 
    transform: scale(1.1); 
    margin-left: 2px; 
    margin-right: 4px; 
    accent-color: var(--text-on-page-bg); 
    cursor: pointer; 
}
.controls input[type="range"] { 
    width: 110px; 
    -webkit-appearance: none; 
    appearance: none; 
    background: transparent; 
    margin: 0; 
    cursor: pointer; 
}
.controls input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 8px; background: linear-gradient(to right, var(--slider-track-active) var(--range-progress, 0%), var(--slider-track-inactive) var(--range-progress, 0%)); border-radius: 4px; }
.controls input[type="range"]::-moz-range-track { width: 100%; height: 8px; background: linear-gradient(to right, var(--slider-track-active) var(--range-progress, 0%), var(--slider-track-inactive) var(--range-progress, 0%)); border-radius: 4px; }
.controls input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; border: none; width: 18px; height: 18px; border-radius: 50%; background: var(--slider-thumb-color); cursor: pointer; margin-top: -5px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.controls input[type="range"]::-moz-range-thumb { border: none; width: 18px; height: 18px; border-radius: 50%; background: var(--slider-thumb-color); cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.controls input[type="range"]:hover::-webkit-slider-thumb { background: var(--control-hover-color); }
.controls input[type="range"]:hover::-moz-range-thumb { background: var(--control-hover-color); }
        
.controls input[type="color"] { border: 1px solid var(--text-on-control-panel); background: var(--canvas-bg-color); width: 28px; height: 28px; border-radius: 4px; margin-left: auto; /* Push color picker to the right of label */ cursor: pointer; padding: 0; }
.controls input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
.controls input[type="color"]::-webkit-color-swatch { border: none; border-radius: 3px; }
.controls input[type="color"]::-moz-color-swatch { border: none; border-radius: 3px; }

.controls .action-group button, 
.controls button#fullscreenButton { /* Keep styles for Reset & Fullscreen */
    background: transparent; 
    color: var(--text-on-control-panel); 
    border: 1px solid var(--text-on-control-panel); 
    border-radius: 5px; padding: 6px 10px; box-shadow: none; 
    transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease; 
    font-family: 'Oswald', sans-serif; font-weight: normal; font-size: 0.9em; 
    line-height: 1.2; min-width: 60px; text-align: center; cursor: pointer; 
}
.controls .action-group button:hover, 
.controls button#fullscreenButton:hover { background: var(--text-on-control-panel); color: var(--control-panel-bg); border-color: var(--text-on-control-panel); }
.controls .action-group button:active, 
.controls button#fullscreenButton:active { background: var(--shape-button-active-bg); color: var(--control-panel-bg); border-color: var(--shape-button-active-bg); }
button#fullscreenButton { font-weight: bold; } 

.value-display { display: inline-block; min-width: 25px; text-align: right; margin-left: 3px; padding: 1px 3px; border-radius: 3px; font-size: 0.9em; color: var(--text-on-control-panel); font-family: 'Oswald', sans-serif; font-weight: normal; }
        
/* Remove .shape-selector and .shape-button as they are not in current Anthozoa HTML */

#site-footer { width: 100%; text-align: center; padding: 5px 15px; font-size: 0.8em; color: var(--text-on-page-bg); font-family: 'Oswald', sans-serif; margin-top: auto; flex-shrink: 0; box-sizing: border-box; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 4px 10px; }
#site-footer a { color: var(--text-on-page-bg); text-decoration: none; }
#site-footer a:hover { text-decoration: underline; }
#site-footer span { color: var(--text-on-page-bg); }
        
body.fullscreen-active { padding: 0 !important; overflow: hidden !important; background-color: var(--canvas-bg-color) !important; }
body.fullscreen-active .main-title, body.fullscreen-active .controls, body.fullscreen-active #site-footer { display: none !important; }
body.fullscreen-active #sketch-container { width: 100vw !important; height: 100vh !important; max-width: none !important; padding: 0 !important; }
body.fullscreen-active #p5-canvas-placeholder { margin-bottom: 0 !important; }
body.fullscreen-active canvas { border-radius: 0 !important; box-shadow: none !important; }

@media (max-width: 780px) { 
    .controls {
        align-items: stretch; /* Allow groups to take full width before stacking */
    }
    .controls .control-group {
        min-width: 160px; /* Adjust min-width for groups */
        flex-basis: content; /* Allow natural sizing */
    }
}
@media (max-width: 600px) { 
    .main-title { font-size: 2em; margin-bottom: 15px; }
    .controls { padding: 8px; gap: 10px; flex-direction: column; align-items: center; }
    .controls .control-group { 
        width: 100%; 
        max-width: 320px; /* Max width for stacked groups */
        padding: 6px 0; 
        align-items: center; /* Center label/input pairs */
    }
    .controls .control-group.slider-group label,
    .controls .control-group.appearance-group label,
    .controls .control-group.behavior-group label { 
        width: 100%; 
        justify-content: space-between; 
    }
    .controls .action-group {
        flex-direction: row; /* Keep action buttons in a row */
        justify-content: center;
        width: 100%;
        max-width: none; /* Allow it to span wider if buttons are many */
    }
    .controls input[type="range"] { width: 120px; }
    #site-footer { font-size: 0.75em; }
}
@media (max-width: 420px) {
    .main-title { font-size: 1.7em; margin-bottom: 12px; }
    #sketch-container { padding-left: 10px; padding-right: 10px; }
    .controls input[type="range"] { width: 100px; }
    .controls .action-group button { font-size: 0.85em; min-width: auto; padding: 6px 8px;}
}
